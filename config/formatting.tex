% !TeX root = ../main.tex
% !TeX encoding = utf8
%
% FORMATTING CONFIGURATION
% Typography settings, page layout, and visual styling

% =============================================================================
% KOMA-SCRIPT PAGE LAYOUT
% =============================================================================
% Note: Basic KOMA options are set in main.tex with \KOMAoptions
% Additional formatting below:

% Font for headings (chapter, section, subsection)
\setkomafont{disposition}{\sffamily\bfseries}

% Width of chapter opening quotes (used with \dictum[author]{quote})
\renewcommand{\dictumwidth}{0.45\textwidth}

% Recalculate page layout after font changes
\recalctypearea

% =============================================================================
% BACKGROUND IMAGE FOR COVER
% =============================================================================
\usepackage{eso-pic}
\newcommand\BackgroundPic{%
	\put(0,-1){%
		\parbox[b][\paperheight]{\paperwidth}{%
			\vfill
			\centering
			% Specify cover background image here
			\includegraphics[width=\paperwidth,height=\paperheight,%
			keepaspectratio]{portada-ugr-color-no-margin-bottom}%
			\vfill
}}}

% Available cover options:
%   portada-ugr, portada-ugr-color: UGR watermark (grayscale/color)
%   portada-ugr-sencilla, portada-ugr-sencilla-color: Simple UGR header only

% =============================================================================
% CODE LISTING STYLE
% =============================================================================
% Support for accented characters in listings
\lstset{
    literate=%
        {á}{{\'a}}1 {í}{{\'i}}1 {é}{{\'e}}1 {ý}{{\'y}}1 {ú}{{\'u}}1 {ó}{{\'o}}1
        {ě}{{\v{e}}}1 {š}{{\v{s}}}1 {č}{{\v{c}}}1 {ř}{{\v{r}}}1 {ž}{{\v{z}}}1
        {ď}{{\v{d}}}1 {ť}{{\v{t}}}1 {ň}{{\v{n}}}1 {ů}{{\r{u}}}1
        {Á}{{\'A}}1 {Í}{{\'I}}1 {É}{{\'E}}1 {Ý}{{\'Y}}1 {Ú}{{\'U}}1 {Ó}{{\'O}}1
        {Ě}{{\v{E}}}1 {Š}{{\v{S}}}1 {Č}{{\v{C}}}1 {Ř}{{\v{R}}}1 {Ž}{{\v{Z}}}1
        {Ď}{{\v{D}}}1 {Ť}{{\v{T}}}1 {Ň}{{\v{N}}}1 {Ů}{{\r{U}}}1
}

% Color scheme for code
\definecolor{bluekeywords}{rgb}{0.13, 0.13, 1}
\definecolor{greencomments}{rgb}{0, 0.5, 0}
\definecolor{redstrings}{rgb}{0.9, 0, 0}
\definecolor{graynumbers}{rgb}{0.5, 0.5, 0.5}

% General listing style
\lstset{
    autogobble,
    columns=fullflexible,
    showspaces=false,
    showtabs=false,
    breaklines=true,
    showstringspaces=false,
    breakatwhitespace=true,
    escapeinside={(*@}{@*)},
    commentstyle=\color{greencomments},
    keywordstyle=\color{bluekeywords},
    stringstyle=\color{redstrings},
    numberstyle=\color{graynumbers},
    basicstyle=\ttfamily\footnotesize,
    frame=l,
    framesep=30pt,
    xleftmargin=30pt,
    tabsize=4,
    captionpos=b,
    numbers=left,
    numberstyle=\footnotesize\color{graynumbers},
    numbersep=10pt,
    escapechar=|,
    numberblanklines=false,
    columns=flexible
}

% Rename listings
\renewcommand{\lstlistingname}{Programa}
\renewcommand{\lstlistlistingname}{List of \lstlistingname s}

% =============================================================================
% BIBLIOGRAPHY FORMATTING
% =============================================================================
\DeclareFieldFormat{labelnumberwidth}{\mkbibbrackets{#1}}

\defbibenvironment{bibliography}
  {\list
     {\printtext[labelnumberwidth]{%
      \printfield{labelprefix}%
      \printfield{labelnumber}}}
     {\setlength{\labelwidth}{\labelnumberwidth}%
      \setlength{\leftmargin}{\labelwidth}%
      \setlength{\labelsep}{\biblabelsep}%
      \addtolength{\leftmargin}{\labelsep}%
      \setlength{\itemsep}{8pt}%
      \setlength{\parsep}{\bibparsep}}%
      \renewcommand*{\makelabel}[1]{\hss##1}}
  {\endlist}
  {\item}

